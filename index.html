<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Peminjaman dan Pengembalian Buku</title>
    <style>
        /* Styling untuk tampilan form */
        body { 
            font-family: Arial, sans-serif; 
            background-color: #f4f4f4; 
            margin: 0; 
            padding: 0; 
        }
        .container { 
            width: 500px; 
            margin: 50px auto; 
            padding: 20px; 
            background-color: white; 
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); 
            border-radius: 8px;
        }
        h2 { 
            text-align: center; 
        }
        label { 
            display: block; 
            margin: 10px 0 5px; 
        }
        input[type="text"], input[type="number"], input[type="date"] { 
            width: 100%; 
            padding: 8px; 
            margin: 5px 0 15px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
        }
        button { 
            width: 100%; 
            padding: 10px; 
            background-color: #4CAF50; 
            color: white; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer; 
        }
        button:hover { 
            background-color: #45a049; 
        }
        .result {
            margin-top: 20px;
            padding: 10px;
            background-color: #e7f7e7;
            border: 1px solid #b5d8b5;
            color: #4CAF50;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Peminjaman Buku</h2>
    <form id="peminjamanForm">
        <label for="namaPeminjam">Nama Peminjam</label>
        <input type="text" id="namaPeminjam" required>

        <label for="kodeBuku">Kode Buku</label>
        <input type="text" id="kodeBuku" required>

        <button type="submit">Pinjam Buku</button>
    </form>

    <h2>Pengembalian Buku</h2>
    <form id="pengembalianForm">
        <label for="namaPeminjamKembali">Nama Peminjam</label>
        <input type="text" id="namaPeminjamKembali" required>

        <label for="kodeBukuKembali">Kode Buku</label>
        <input type="text" id="kodeBukuKembali" required>

        <button type="submit">Kembalikan Buku</button>
    </form>

    <div id="result" class="result" style="display: none;"></div>
</div>

<script>
// Peminjaman Buku
document.getElementById('peminjamanForm').addEventListener('submit', function(event) {
    event.preventDefault();

    var namaPeminjam = document.getElementById('namaPeminjam').value; //make sure there is namaPeminjam in the form
    var kodeBuku = document.getElementById('kodeBuku').value; 

    fetch('https://script.google.com/macros/s/AKfycbyJJOWN3s11H-lKR-Iacrp0Ie74CVDOoXnxlngDZ_avSMqpIgJc1mU25Oo3j2UVjw8p/exec', {  // URL Web App Anda
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            action: 'pinjam',  // Menentukan apakah itu peminjaman atau pengembalian buku
            namaPeminjam: namaPeminjam,
            kodeBuku: kodeBuku
        })
    })
    .then(response => response.json())  // Menerima respons dari Google Apps Script
    .then(data => {
        document.getElementById('result').innerText = data.result;  // Tampilkan hasil peminjaman/pengembalian
        document.getElementById('result').style.display = 'block';  // Tampilkan pesan
        document.getElementById('peminjamanForm').reset();  // Reset form setelah submit
    })
    .catch(error => {
        console.error('Error:', error);  // Jika ada error
        alert('Terjadi kesalahan. Coba lagi.');
    });
});

// Pengembalian Buku
document.getElementById('pengembalianForm').addEventListener('submit', function(event) {
    event.preventDefault();

    var namaPeminjam = document.getElementById('namaPeminjamKembali').value;
    var kodeBuku = document.getElementById('kodeBukuKembali').value;

    fetch('https://script.google.com/macros/s/AKfycbyJJOWN3s11H-lKR-Iacrp0Ie74CVDOoXnxlngDZ_avSMqpIgJc1mU25Oo3j2UVjw8p/exec', {  // URL Web App Anda
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            action: 'kembali', 
            namaPeminjam: namaPeminjam, 
            kodeBuku: kodeBuku 
        })
    })
    .then(response => response.json())
    .then(data => {
        document.getElementById('result').innerText = data.result;
        document.getElementById('result').style.display = 'block';
        document.getElementById('pengembalianForm').reset();
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Terjadi kesalahan. Coba lagi.');
    });
});
</script>

</body>
</html>
